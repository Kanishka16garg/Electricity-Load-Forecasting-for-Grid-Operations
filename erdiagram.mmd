erDiagram
    direction TB

    USERS {
        UUID id PK ""
        VARCHAR name ""
        VARCHAR email ""
        VARCHAR password_hash ""
        VARCHAR role ""
        TIMESTAMP created_at ""
    }

    METERS {
        UUID id PK ""
        VARCHAR meter_name ""
        VARCHAR location ""
        TIMESTAMP created_at ""
    }

    LOAD_DATA {
        UUID id PK ""
        UUID meter_id FK ""
        TIMESTAMP timestamp ""
        FLOAT load_value ""
    }

    MODELS {
        UUID id PK ""
        UUID meter_id FK ""
        VARCHAR model_type ""
        VARCHAR version ""
        FLOAT aic ""
        FLOAT bic ""
        TIMESTAMP trained_at ""
    }

    FORECASTS {
        UUID id PK ""
        UUID meter_id FK ""
        UUID model_id FK ""
        TIMESTAMP forecast_time ""
        FLOAT predicted_load ""
        TIMESTAMP generated_at ""
    }

    METRICS {
        UUID id PK ""
        UUID model_id FK ""
        FLOAT mae ""
        FLOAT smape ""
        TIMESTAMP evaluated_at ""
    }

    TRAINING_JOBS {
        UUID id PK ""
        UUID meter_id FK ""
        UUID triggered_by FK ""
        VARCHAR status ""
        TIMESTAMP started_at ""
        TIMESTAMP completed_at ""
    }

    BATCH_JOBS {
        UUID id PK ""
        UUID uploaded_by FK ""
        VARCHAR file_name ""
        VARCHAR status ""
        INT total_records ""
        INT processed_records ""
    }

    BATCH_RESULTS {
        UUID id PK ""
        UUID batch_id FK ""
        UUID meter_id FK ""
        TIMESTAMP forecast_time ""
        FLOAT predicted_load ""
    }

    %% Relationships
    USERS ||--o{ TRAINING_JOBS : "triggers"
    USERS ||--o{ BATCH_JOBS : "uploads"

    METERS ||--o{ LOAD_DATA : "has"
    METERS ||--o{ MODELS : "trained_for"
    METERS ||--o{ FORECASTS : "generates"

    MODELS ||--o{ FORECASTS : "used_for"
    MODELS ||--o{ METRICS : "evaluated_by"

    TRAINING_JOBS ||--o{ MODELS : "creates"

    BATCH_JOBS ||--o{ BATCH_RESULTS : "contains"
    METERS ||--o{ BATCH_RESULTS : "belongs_to"
